# 2019.10.15 spring



>  스프링 프레임워크에 대한 공부는 **리펙토링**과 **테스트 주도 개발**을 중심으로 이루어진다.



- **토비의 스프링**
  - **1장 오브젝트와 의존관계 정리**



- 사용자 정보를 DB에 등록하거나 아이디로 조회하는 기능을 가진 간단한 DAO 코드 작성
- 코드의 문제점을 분석, 이를 다양한 방법과 패턴, 원칙, IoC/DI 프레임워크까지 적용 및 개선
  과정

1. 책임이 다른 코드를 분리해서 두 개의 클래스로 작성(관심사의 분리, 리펙토링)
2. 그 중, 바뀔 수 있는 쪽의 클래스는 인터페이스로 구현, 다른 클래스에서 인터페이스를 통해서
접근 하도록 작성하여 인터페이스를 정의한 쪽의 구현 방법이 달라져 클래스가 바뀌더라도,
그 기능을 사용하는 클래스의 코드는 같이 수정할 필요가 없도록 작성(전략 패턴)
3. 이를 통해 자신의 책임 자체가 변경되는 경우 외에는 불필요한 변화가 발생하지 않도록 막아
주고 자신이 사용하는 외부 오브젝트의 기능은 자유롭게 확장하거나 변경할 수 있게 만들었
다.(개방 폐쇄 원칙)
4. 한쪽의 기능 변화가 다른 쪽의 요구하지 않아도 되게 했고(낮은 결합도), 자신의 책임과 관심
사에만 순수하게 집중할 수(높은 응집도) 있도록 했다.
5. 오브젝트가 생성되고 여타 오브젝트와 관계를 맺는 작업의 제어권을 별도의 오브젝트 팩토리
를 만들어 넘겼다. 또는 오브젝트 팩토리의 기능을 일반화한 IoC 컨테이너로 넘겨서 오브젝트
가 자신이 사용할 대상의 생성이나 선택에 관한 책임으로부터 자유롭게 했다.(제어의 역
전/IoC)
6. 전통적인 싱글톤 패턴 구현 방식의 단점을 살피고, 서버에서 사용되는 서비스 오브젝트로서
의 장점을 살릴 수 있는 싱글톤을 사용하면서도 싱글톤 패턴의 단점을 극복할 수 있도록 설계
된 컨테이너를 활용하는 방법에 대해 알아봤다.(싱글톤 레지스트리)
7. 설계 시점과 코드에는 클래스와 인터페이스 사이의 느슨한 의존관계만 만들어놓고, 런타임시
에 실제 사용할 구체적인 의존 오브젝트를 제3자(DI 컨테이너)의 도움으로 주입받아서 다이
나믹한 의존관계를 갖게 해주는 IoC의 특별한 케이스를 확인(의존관계주입/DI)
8. 의존 오브젝트를 주입할 때 생성자를 이용하는 방법과 수정자 메서드를 이용하는 방법을 확
인(생성자 주입과 수정자 주입)
9. 마지막으로, XML을 이용해 DI 설정정보를 만드는 방법과 의존 오브젝트가 아닌 일반 값을 외
부에서 설정해서 런타임 시에 주입하는 방법을 확인(XML 설정)